<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>92 Draft Randomizer</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
background-color: black;
display: flex;
justify-content: center;
align-items: center;
height: 100vh;
overflow: hidden;
}
/* Grid container remains as approved */
.grid-container {
display: grid;
width: 100vw;
height: 100vh;
background-color: black;
/* We want some gap so the background is visible */
grid-gap: 20px;
justify-content: center;
align-content: center;
}
/* Each image block is originally fixed at 740x560 */
.image-container {
position: relative;
width: 740px;
height: 560px;
overflow: hidden;
/* A small margin is built into the grid-gap */
}
.image-container img {
width: 100%;
height: 100%;
object-fit: contain;
position: absolute;
display: none;
}
.image-container img.active {
display: block;
}
</style>
</head>
<body>
<div class="grid-container" id="gridContainer"></div>

<script>
const imageUrls = [
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/01_shaquille_oneal.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/02_alonzo_mourning.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/03_christian_laettner.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/04_jim_jackson.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/05_laphonso_ellis.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/06_tom_gugliotta.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/07_walt_williams.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/08_todd_day.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/09_clarence_weatherspoon.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/10_adam_keefe.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/11_robert_horry.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/12_harold_miner.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/13_bryant_stith.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/14_malik_sealy.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/15_anthony_peeler.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/16_randy_woods.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/17_doug_christie.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/18_tracy_murray.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/19_don_maclean.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/20_hubert_davis.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/21_jon_barry.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/22_oliver_miller.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/23_lee_mayberry.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/24_latrell_sprewell.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/25_elmore_spencer.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/26_dave_johnson.jpg",
"https://raw.githubusercontent.com/filkfilkommen/draft_randomizer/main/27_byron_houston.jpg"
];

const gridContainer = document.getElementById("gridContainer");
let imageBlocks = []; // Holds all blocks
let nextBlockTimer; // Timer for auto-adding blocks
const rotationDuration = 27 * 150; // 27 images x 150ms = 4050ms per full cycle

// Fisher-Yates shuffle
function shuffleArray(arr) {
for (let i = arr.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[arr[i], arr[j]] = [arr[j], arr[i]];
}
}

// Create a new image block (as approved)
function createImageBlock() {
let shuffled = [...imageUrls];
shuffleArray(shuffled);

const block = document.createElement("div");
block.classList.add("image-container");

shuffled.forEach((url, i) => {
const img = document.createElement("img");
img.src = url;
if (i === 0) {
img.classList.add("active");
}
img.style.animationDelay = `${i * 0.1}s`;
block.appendChild(img);
});

gridContainer.appendChild(block);
imageBlocks.push({ block: block, index: 0, total: shuffled.length });

// Maintain original approved layout: fixed block size until grid is full.
updateGridSize();
startBlockCycle(imageBlocks.length - 1);

// Schedule automatic addition of a new block:
if (nextBlockTimer) clearTimeout(nextBlockTimer);
// If fewer than 6 blocks, wait one full cycle; after that, add blocks every 150ms
const delay = imageBlocks.length < 6 ? rotationDuration : 150;
nextBlockTimer = setTimeout(createImageBlock, delay);
}

// Cycle images in a block
function startBlockCycle(blockIndex) {
const blockObj = imageBlocks[blockIndex];
const imgs = blockObj.block.querySelectorAll("img");
setInterval(() => {
imgs[blockObj.index].classList.remove("active");
blockObj.index = (blockObj.index + 1) % blockObj.total;
imgs[blockObj.index].classList.add("active");
}, 150);
}

// Update grid layout to maintain original approved placement
function updateGridSize() {
// We'll use the fixed size (740x560) for each block as long as the grid doesn't overflow.
// When more blocks are added such that the total grid width or height would exceed the viewport,
// then we shrink all blocks uniformly. Otherwise, we keep the fixed size.
const fixedWidth = 740;
const fixedHeight = 560;
const margin = 20; // Assume a gap between blocks for background to show
const numBlocks = imageBlocks.length;

// Calculate the ideal grid: maximum columns if using fixed size (plus margin)
const maxColumns = Math.floor(window.innerWidth / (fixedWidth + margin)) || 1;
// Let columns be the minimum of numBlocks and maxColumns
const columns = Math.min(numBlocks, maxColumns);
const rows = Math.ceil(numBlocks / columns);

// Calculate total grid dimensions using fixed size and margin
const totalGridWidth = columns * (fixedWidth + margin) - margin;
const totalGridHeight = rows * (fixedHeight + margin) - margin;

// If the fixed grid fits within the viewport, use fixed size; otherwise, calculate a scaling factor.
let scale = 1;
if (totalGridWidth > window.innerWidth || totalGridHeight > window.innerHeight) {
const scaleX = window.innerWidth / totalGridWidth;
const scaleY = window.innerHeight / totalGridHeight;
scale = Math.min(scaleX, scaleY);
// Ensure not to go below 150px width per block
scale = Math.max(scale, 150 / fixedWidth);
}

// Set the grid container as a CSS Grid with centered items
gridContainer.style.display = "grid";
gridContainer.style.gridTemplateColumns = `repeat(${columns}, auto)`;
gridContainer.style.justifyContent = "center";
gridContainer.style.alignContent = "center";

// Update each block's size
imageBlocks.forEach(blockObj => {
blockObj.block.style.width = `${fixedWidth * scale}px`;
blockObj.block.style.height = `${fixedHeight * scale}px`;
});
}

// Remove manual event listeners for adding blocks; blocks load automatically only.
window.addEventListener("resize", updateGridSize);

// Start the first block on page load
window.onload = createImageBlock;
</script>
</body>
</html>
